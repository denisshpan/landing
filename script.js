const TRANSLATIONS = {
  es: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Tus peores inquilinos... es broma",
    heroTitle: "Dos bielorrusos buscan piso. No, no vamos a montar un burdel",
    heroSubtitle:
      "Denis (38) y Svetlana (37). Sin hijos que destrocen paredes. Sin perro que meé en el ascensor. Sin excusas el día 5. ¿Suena demasiado bien? Pues sigue leyendo.",
    heroCtaPrimary: "Suelta el piso",
    heroCtaSecondary: "¿Qué queremos exactamente?",
    heroPhotoLabel: "Aquí irá nuestra foto juntos",
    aboutTitle: "Quiénes somos",
    aboutIntro:
      "Si ya pasaste por inquilinos que dejaron el piso como zona de guerra, respira: nosotros dejamos el baño más limpio de lo que lo encontramos. Sí, existimos.",
    aboutDenisPhotoLabel: "Foto de Denis",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Trabaja en tech, no habla alto y no tiene amigos que aparezcan a las 4 de la mañana con una guitarra. Lo prometemos.",
    aboutSvetlanaPhotoLabel: "Foto de Svetlana",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creativa, organizada y capaz de limpiar la cocina después de usarla. Sí, en 2026 eso ya es un superpoder.",
    aboutUsFactsTitle: "Datos importantes",
    aboutFactNoKids: "Niños: 0. Paredes intactas.",
    aboutFactNoPets: "Animales: 0. Sofá sin mordiscos.",
    aboutFactCalm: "Fiestas: 0. Policía no nos conoce.",
    aboutFactClean: "Nevera: sin formas de vida desconocidas.",
    apartmentTitle: "Qué piso buscamos",
    apartmentIntro:
      "No pedimos un palacio, pedimos cuatro paredes sin humedades y un casero que no desaparezca cuando se rompe algo.",
    apartmentLocationTitle: "Ubicación en Valencia",
    apartmentLocationText:
      "Ruzafa, Benimaclet, Cabanyal, lo que sea. Si no hay petardos cada noche y hay un Mercadona cerca, nos vale.",
    apartmentSizeTitle: "Tamaño y distribución",
    apartmentSizeText:
      "1–2 dormitorios. Si cabe un escritorio y luz natural, ya estamos medio enamorados.",
    apartmentTermTitle: "Plazo y estabilidad",
    apartmentTermText:
      "No nos vamos en 3 meses. Si el piso nos gusta, nos quedamos más tiempo que la humedad.",
    apartmentBudgetTitle: "Presupuesto",
    apartmentBudgetText:
      "Los números los hablamos en privado: no regateamos como en el rastro, pero tampoco aceptamos fantasías.",
    whyUsTitle: "Por qué tu piso nos necesita",
    whyUsIntro:
      "Tu piso ha sufrido bastante. Con nosotros se jubila del caos: nada de excusas, nada de sorpresas y nada de llamadas a las 3 de la mañana.",
    whyUsIncomeTitle: "Ingresos estables",
    whyUsIncomeText:
      "Pagamos el día 1, no el día 15. Sin excusas creativas, sin «te lo paso mañana». Dinero real, a tiempo.",
    whyUsCareTitle: "Cuidado del piso",
    whyUsCareText:
      "No rompemos cosas, no hacemos «reformas» sin avisar y devolvemos el piso mejor de como nos lo dieron.",
    whyUsNeighborsTitle: "Respeto a los vecinos",
    whyUsNeighborsText:
      "Tus vecinos no van a saber ni que existimos. Eso sí: si nos cruzan por la escalera, saludamos. Somos raros así.",
    whyUsCommunicationTitle: "Comunicación sencilla",
    whyUsCommunicationText:
      "Respondemos mensajes, cogemos el teléfono y no inventamos excusas. Básicamente, unicornios del alquiler.",
    contactTitle: "¿Tienes un piso? Hablemos.",
    contactIntro:
      "Si tienes un piso en Valencia y estás harto de inquilinos que desaparecen o dejan el piso como un campo de batalla, escríbenos. Prometemos ser aburridos de la mejor manera.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Teléfono",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Mensajería / redes",
    contactSocialValue: "Enlace a WhatsApp, Telegram o redes sociales.",
    contactButton: "Escríbenos ya",
    contactNote:
      "Estos contactos son de prueba: pondremos los reales cuando dejemos de procrastinar.",
    footerText: "Denis & Svetlana · Buscando piso en Valencia (en serio)",
  },
  en: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Your worst tenants... just kidding",
    heroTitle:
      "Two Belarusians looking for a flat. No, we won't turn it into a nightclub",
    heroSubtitle:
      "Denis (38) and Svetlana (37). No kids destroying walls. No dog peeing in the lift. No excuses on the 5th. Sounds too good? Keep reading.",
    heroCtaPrimary: "Drop us the flat",
    heroCtaSecondary: "What exactly do we want?",
    heroPhotoLabel: "Our photo will go here",
    aboutTitle: "Who we are",
    aboutIntro:
      "If your last tenants left the flat looking like a war zone, take a breath: we leave the bathroom cleaner than we found it. Yes, we exist.",
    aboutDenisPhotoLabel: "Denis' photo",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Works in tech, doesn't talk loud and has no friends who show up at 4 a.m. with a guitar. We promise.",
    aboutSvetlanaPhotoLabel: "Svetlana's photo",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creative, organized and actually cleans the kitchen after using it. In 2026, that's basically a superpower.",
    aboutUsFactsTitle: "Key facts",
    aboutFactNoKids: "Kids: 0. Walls intact.",
    aboutFactNoPets: "Animals: 0. Sofa unchewed.",
    aboutFactCalm: "Parties: 0. Police don't know us.",
    aboutFactClean: "Fridge: no unknown life forms.",
    apartmentTitle: "What kind of flat we are looking for",
    apartmentIntro:
      "We don't need a palace, just four walls without damp and a landlord who doesn't vanish when something breaks.",
    apartmentLocationTitle: "Location in Valencia",
    apartmentLocationText:
      "Ruzafa, Benimaclet, Cabanyal, whatever. If there are no fireworks every night and a Mercadona nearby, we're in.",
    apartmentSizeTitle: "Size and layout",
    apartmentSizeText:
      "1–2 bedrooms. If a desk fits and there's natural light, we're already half in love.",
    apartmentTermTitle: "Term and stability",
    apartmentTermText:
      "We don't leave in 3 months. If we like it, we stay longer than the damp.",
    apartmentBudgetTitle: "Budget",
    apartmentBudgetText:
      "We talk numbers in private: no flea‑market haggling, but no fantasy prices either.",
    whyUsTitle: "Why your flat needs us",
    whyUsIntro:
      "Your flat has been through enough. With us it retires from chaos: no excuses, no surprises, no calls at 3 a.m.",
    whyUsIncomeTitle: "Stable income",
    whyUsIncomeText:
      "We pay on the 1st, not the 15th. No creative excuses, no 'I'll send it tomorrow'. Real money, on time.",
    whyUsCareTitle: "We care for the flat",
    whyUsCareText:
      "We don't break things, don't do surprise 'renovations' and return the flat better than we got it.",
    whyUsNeighborsTitle: "Respect for neighbours",
    whyUsNeighborsText:
      "Your neighbours won't even know we exist. But if they bump into us on the stairs, we say hello. We're weird like that.",
    whyUsCommunicationTitle: "Easy communication",
    whyUsCommunicationText:
      "We answer messages, pick up the phone and don't make up excuses. Basically, rental unicorns.",
    contactTitle: "Got a flat? Let's talk.",
    contactIntro:
      "If you have a flat in Valencia and you're tired of tenants who vanish or leave the place looking like a battlefield, write to us. We promise to be boring in the best way.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Phone",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Messaging / social",
    contactSocialValue: "Link to WhatsApp, Telegram or social networks.",
    contactButton: "Write to us now",
    contactNote:
      "These contacts are placeholders: we'll add the real ones when we stop procrastinating.",
    footerText: "Denis & Svetlana · Looking for a flat in Valencia (seriously)",
  },
};

const STORAGE_KEY = "family-landing-language";

function applyLanguage(lang) {
  const dictionary = TRANSLATIONS[lang];
  if (!dictionary) return;

  document.documentElement.lang = lang === "es" ? "es" : "en";

  const elements = document.querySelectorAll("[data-i18n-key]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n-key");
    const value = dictionary[key];
    if (typeof value === "string") {
      el.textContent = value;
    }
  });

  const toggleButtons = document.querySelectorAll(
    ".language-toggle__btn[data-lang]"
  );
  toggleButtons.forEach((btn) => {
    const isActive = btn.getAttribute("data-lang") === lang;
    btn.classList.toggle("language-toggle__btn--active", isActive);
  });
}

function setupScrollAnimations() {
  const animated = document.querySelectorAll("[data-animate]");
  if (!animated.length) return;

  const prefersReduced =
    window.matchMedia &&
    window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  if (!("IntersectionObserver" in window) || prefersReduced) {
    animated.forEach((el) => el.classList.add("is-visible"));
    return;
  }

  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          obs.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.18,
      rootMargin: "0px 0px -10% 0px",
    }
  );

  animated.forEach((el) => observer.observe(el));
}

function getInitialLanguage() {
  const stored = window.localStorage.getItem(STORAGE_KEY);
  if (stored && (stored === "es" || stored === "en")) {
    return stored;
  }

  const browserLang = navigator.language || navigator.userLanguage || "es";
  if (browserLang.toLowerCase().startsWith("es")) return "es";
  if (browserLang.toLowerCase().startsWith("en")) return "en";

  return "es";
}

function handleLanguageToggleClick(event) {
  const button = event.target.closest(".language-toggle__btn[data-lang]");
  if (!button) return;

  const lang = button.getAttribute("data-lang");
  if (!lang || !(lang in TRANSLATIONS)) return;

  window.localStorage.setItem(STORAGE_KEY, lang);
  applyLanguage(lang);
}

const THEME_STORAGE_KEY = "family-landing-theme";

function getInitialTheme() {
  const stored = window.localStorage.getItem(THEME_STORAGE_KEY);
  if (stored === "dark" || stored === "light") return stored;
  if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
    return "dark";
  }
  return "light";
}

function applyTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  window.localStorage.setItem(THEME_STORAGE_KEY, theme);
}

function handleThemeToggle() {
  const current = document.documentElement.getAttribute("data-theme") || "light";
  applyTheme(current === "dark" ? "light" : "dark");
}

document.addEventListener("DOMContentLoaded", () => {
  applyTheme(getInitialTheme());

  const initialLang = getInitialLanguage();
  applyLanguage(initialLang);

  const languageToggle = document.querySelector(".language-toggle");
  if (languageToggle) {
    languageToggle.addEventListener("click", handleLanguageToggleClick);
  }

  const themeToggle = document.querySelector(".theme-toggle");
  if (themeToggle) {
    themeToggle.addEventListener("click", handleThemeToggle);
  }

  setupScrollAnimations();
});
