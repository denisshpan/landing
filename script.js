const TRANSLATIONS = {
  es: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Pareja legal, casi sospechosamente",
    heroTitle: "Buscamos piso sin drama, sin circo y sin temporada 2",
    heroSubtitle:
      "Somos Denis (38) y Svetlana (37): sin hijos, sin mascotas y con rutina de gente que paga facturas antes de que caduquen.",
    heroCtaPrimary: "Contactar con nosotros",
    heroCtaSecondary: "Ver qué buscamos",
    heroPhotoLabel: "Aquí irá nuestra foto juntos",
    aboutTitle: "Quiénes somos",
    aboutIntro:
      "Pareja europea sin hijos ni mascotas: pagamos a tiempo, limpiamos sin drama y no convertimos el salón en reality show.",
    aboutDenisPhotoLabel: "Foto de Denis",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Trabaja en el sector digital, calmado y responsable. Le gustan la tecnología y los paseos por la ciudad.",
    aboutSvetlanaPhotoLabel: "Foto de Svetlana",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creativa y muy organizada. Le encantan los interiores luminosos, el orden y la cocina casera.",
    aboutUsFactsTitle: "Datos importantes",
    aboutFactNoKids: "Niños: 0 (plantas: quizá)",
    aboutFactNoPets: "Mascotas: sólo las de los vecinos",
    aboutFactCalm: "Fiestas: las del vecino de arriba, no las nuestras",
    aboutFactClean: "Nevera: comida, no experimentos",
    apartmentTitle: "Qué piso buscamos",
    apartmentIntro:
      "Buscamos un piso luminoso y tranquilo, donde el mayor escándalo sea la cafetera de por la mañana.",
    apartmentLocationTitle: "Ubicación en Valencia",
    apartmentLocationText:
      "Barrios tranquilos con buena conexión al centro, panadería cerca y sin petardos todos los días como en Fallas.",
    apartmentSizeTitle: "Tamaño y distribución",
    apartmentSizeText: "1–2 dormitorios, salón luminoso y espacio para trabajar.",
    apartmentTermTitle: "Plazo y estabilidad",
    apartmentTermText: "Buscamos estancia estable y de largo plazo.",
    apartmentBudgetTitle: "Presupuesto",
    apartmentBudgetText:
      "Hablamos de números en privado: no prometemos milagros, pero sí sinceridad total.",
    whyUsTitle: "Por qué tus vecinos nos van a querer",
    whyUsIntro:
      "Si tu piso está cansado de sobresaltos, con nosotros recupera la fe en la tranquilidad: cero caos, cero excusas y bastante sentido común.",
    whyUsIncomeTitle: "Ingresos estables",
    whyUsIncomeText:
      "Trabajamos de forma estable, pagamos sin excusas y no desaparecemos el día 5.",
    whyUsCareTitle: "Cuidado del piso",
    whyUsCareText:
      "Mantenemos el piso limpio, ordenado y entero: muebles con vida, pero sin cicatrices nuevas.",
    whyUsNeighborsTitle: "Respeto a los vecinos",
    whyUsNeighborsText:
      "No hacemos afters, no gritamos por el pasillo y, si hay ruido a las 2:00, seguramente sea una tostadora demasiado motivada.",
    whyUsCommunicationTitle: "Comunicación sencilla",
    whyUsCommunicationText:
      "Hablamos inglés y estamos siempre disponibles por teléfono o mensajería.",
    contactTitle: "Hablemos sobre el piso",
    contactIntro:
      "Si tienes un piso en Valencia que encaje con nosotros (Ruzafa, Benimaclet, Cabanyal… estamos abiertos), estaremos encantados de hablar contigo.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Teléfono",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Mensajería / redes",
    contactSocialValue: "Enlace a WhatsApp, Telegram o redes sociales.",
    contactButton: "Escribir un correo ahora",
    contactNote:
      "Estos datos de contacto son de ejemplo. Los cambiaremos por los tuyos reales cuando todo esté listo.",
    footerText: "Denis & Svetlana · Buscando piso en Valencia",
  },
  en: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Legally boring couple",
    heroTitle: "We want a flat with no drama, no circus, no season 2",
    heroSubtitle:
      "We are Denis (38) and Svetlana (37): no kids, no pets and the kind of routine that pays bills before they start shouting.",
    heroCtaPrimary: "Contact us",
    heroCtaSecondary: "See what we are looking for",
    heroPhotoLabel: "Our photo will go here",
    aboutTitle: "Who we are",
    aboutIntro:
      "European couple with no kids and no pets: we pay on time, clean up properly and keep drama where it belongs — on TV.",
    aboutDenisPhotoLabel: "Denis' photo",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Works in the digital field, calm and responsible. Enjoys technology and walking around the city.",
    aboutSvetlanaPhotoLabel: "Svetlana's photo",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creative and very organized. Loves bright interiors, order and home cooking.",
    aboutUsFactsTitle: "Key facts",
    aboutFactNoKids: "Kids: 0 (maybe plants)",
    aboutFactNoPets: "Pets: only the neighbours’",
    aboutFactCalm: "Parties: hosted by the upstairs neighbour, not us",
    aboutFactClean: "Fridge: food, not experiments",
    apartmentTitle: "What kind of flat we are looking for",
    apartmentIntro:
      "We are looking for a bright, quiet flat where the loudest daily event is the coffee machine.",
    apartmentLocationTitle: "Location in Valencia",
    apartmentLocationText:
      "Quiet neighbourhoods with good connection to the centre, a bakery nearby and not fireworks every single night like Fallas.",
    apartmentSizeTitle: "Size and layout",
    apartmentSizeText: "1–2 bedrooms, bright living room and space to work.",
    apartmentTermTitle: "Term and stability",
    apartmentTermText: "We are looking for a stable, long‑term stay.",
    apartmentBudgetTitle: "Budget",
    apartmentBudgetText:
      "We will discuss budget in private: no miracles promised, but full honesty.",
    whyUsTitle: "Why your neighbours will like us",
    whyUsIntro:
      "If your flat is tired of chaos, with us it gets a reset: zero nonsense, zero excuses and a solid amount of common sense.",
    whyUsIncomeTitle: "Stable income",
    whyUsIncomeText:
      "We have stable jobs, pay on time and don’t disappear on the 5th.",
    whyUsCareTitle: "We care for the flat",
    whyUsCareText:
      "We keep the place clean, tidy and in one piece: furniture with stories, not fresh scars.",
    whyUsNeighborsTitle: "Respect for neighbours",
    whyUsNeighborsText:
      "No after‑parties, no hallway shouting and if there is noise at 2 a.m., it is probably a toaster with ambitions.",
    whyUsCommunicationTitle: "Easy communication",
    whyUsCommunicationText:
      "We speak English and stay in touch by phone or messaging apps.",
    contactTitle: "Let's talk about the flat",
    contactIntro:
      "If you have a flat in Valencia that might fit us (Ruzafa, Benimaclet, Cabanyal… we are open), we will be happy to talk.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Phone",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Messaging / social",
    contactSocialValue: "Link to WhatsApp, Telegram or social networks.",
    contactButton: "Send an email now",
    contactNote:
      "These contact details are examples. We will replace them with your real contacts when everything is ready.",
    footerText: "Denis & Svetlana · Looking for a flat in Valencia",
  },
};

const STORAGE_KEY = "family-landing-language";

function applyLanguage(lang) {
  const dictionary = TRANSLATIONS[lang];
  if (!dictionary) return;

  document.documentElement.lang = lang === "es" ? "es" : "en";

  const elements = document.querySelectorAll("[data-i18n-key]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n-key");
    const value = dictionary[key];
    if (typeof value === "string") {
      el.textContent = value;
    }
  });

  const toggleButtons = document.querySelectorAll(
    ".language-toggle__btn[data-lang]"
  );
  toggleButtons.forEach((btn) => {
    const isActive = btn.getAttribute("data-lang") === lang;
    btn.classList.toggle("language-toggle__btn--active", isActive);
  });
}

function setupScrollAnimations() {
  const animated = document.querySelectorAll("[data-animate]");
  if (!animated.length) return;

  const prefersReduced =
    window.matchMedia &&
    window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  if (!("IntersectionObserver" in window) || prefersReduced) {
    animated.forEach((el) => el.classList.add("is-visible"));
    return;
  }

  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          obs.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.18,
      rootMargin: "0px 0px -10% 0px",
    }
  );

  animated.forEach((el) => observer.observe(el));
}

function getInitialLanguage() {
  const stored = window.localStorage.getItem(STORAGE_KEY);
  if (stored && (stored === "es" || stored === "en")) {
    return stored;
  }

  const browserLang = navigator.language || navigator.userLanguage || "es";
  if (browserLang.toLowerCase().startsWith("es")) return "es";
  if (browserLang.toLowerCase().startsWith("en")) return "en";

  return "es";
}

function handleLanguageToggleClick(event) {
  const button = event.target.closest(".language-toggle__btn[data-lang]");
  if (!button) return;

  const lang = button.getAttribute("data-lang");
  if (!lang || !(lang in TRANSLATIONS)) return;

  window.localStorage.setItem(STORAGE_KEY, lang);
  applyLanguage(lang);
}

document.addEventListener("DOMContentLoaded", () => {
  const initialLang = getInitialLanguage();
  applyLanguage(initialLang);

  const languageToggle = document.querySelector(".language-toggle");
  if (languageToggle) {
    languageToggle.addEventListener("click", handleLanguageToggleClick);
  }

  setupScrollAnimations();
});

