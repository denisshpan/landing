const TRANSLATIONS = {
  es: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Pareja responsable (pero con carácter)",
    heroTitle: "Queremos un piso tan tranquilo como nosotros, casi",
    heroSubtitle:
      "Somos Denis (38) y Svetlana (37), pareja tranquila sin hijos ni mascotas que busca un hogar luminoso en Valencia.",
    heroCtaPrimary: "Contactar con nosotros",
    heroCtaSecondary: "Ver qué buscamos",
    heroPhotoLabel: "Aquí irá nuestra foto juntos",
    aboutTitle: "Quiénes somos",
    aboutIntro:
      "Pareja europea sin hijos ni mascotas: dos adultos limpios, puntuales y sin dramas.",
    aboutDenisPhotoLabel: "Foto de Denis",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Trabaja en el sector digital, calmado y responsable. Le gustan la tecnología y los paseos por la ciudad.",
    aboutSvetlanaPhotoLabel: "Foto de Svetlana",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creativa y muy organizada. Le encantan los interiores luminosos, el orden y la cocina casera.",
    aboutUsFactsTitle: "Datos importantes",
    aboutFactNoKids: "Cero niños",
    aboutFactNoPets: "Cero mascotas",
    aboutFactCalm: "Cero fiestas ruidosas",
    aboutFactClean: "Cero desorden",
    apartmentTitle: "Qué piso buscamos",
    apartmentIntro:
      "Buscamos un piso luminoso y tranquilo, cómodo para dos personas que trabajan desde casa.",
    apartmentLocationTitle: "Ubicación en Valencia",
    apartmentLocationText:
      "Barrios tranquilos con buena conexión al centro y servicios cerca.",
    apartmentSizeTitle: "Tamaño y distribución",
    apartmentSizeText: "1–2 dormitorios, salón luminoso y espacio para trabajar.",
    apartmentTermTitle: "Plazo y estabilidad",
    apartmentTermText: "Buscamos estancia estable y de largo plazo.",
    apartmentBudgetTitle: "Presupuesto",
    apartmentBudgetText:
      "Comentaremos el presupuesto en privado: somos realistas y abiertos al diálogo.",
    whyUsTitle: "Por qué será cómodo con nosotros",
    whyUsIntro:
      "No buscamos un piso perfecto, buscamos uno vivo. Lo cuidamos, pero sin obsesiones: como un hogar real.",
    whyUsIncomeTitle: "Ingresos estables",
    whyUsIncomeText: "Trabajamos de forma estable y podemos confirmar ingresos.",
    whyUsCareTitle: "Cuidado del piso",
    whyUsCareText: "Mantenemos el piso limpio, ordenado y en buen estado.",
    whyUsNeighborsTitle: "Respeto a los vecinos",
    whyUsNeighborsText:
      "No hacemos afters, no gritamos por el pasillo y no probamos la acústica del piso a las 2:00.",
    whyUsCommunicationTitle: "Comunicación sencilla",
    whyUsCommunicationText:
      "Hablamos inglés y estamos siempre disponibles por teléfono o mensajería.",
    contactTitle: "Hablemos sobre el piso",
    contactIntro:
      "Si tienes un piso en Valencia que encaje con nosotros, estaremos encantados de hablar contigo.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Teléfono",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Mensajería / redes",
    contactSocialValue: "Enlace a WhatsApp, Telegram o redes sociales.",
    contactButton: "Escribir un correo ahora",
    contactNote:
      "Estos datos de contacto son de ejemplo. Los cambiaremos por los tuyos reales cuando todo esté listo.",
    footerText: "Denis & Svetlana · Buscando piso en Valencia",
  },
  en: {
    brandTitle: "Denis & Svetlana",
    heroKicker: "Responsible couple (with a twist)",
    heroTitle: "We want a flat as calm as we are, almost",
    heroSubtitle:
      "We are Denis (38) and Svetlana (37), a calm couple with no children or pets looking for a bright home in Valencia.",
    heroCtaPrimary: "Contact us",
    heroCtaSecondary: "See what we are looking for",
    heroPhotoLabel: "Our photo will go here",
    aboutTitle: "Who we are",
    aboutIntro:
      "European couple with no kids and no pets: two tidy adults, on time and with zero drama.",
    aboutDenisPhotoLabel: "Denis' photo",
    aboutDenisName: "Denis, 38",
    aboutDenisText:
      "Works in the digital field, calm and responsible. Enjoys technology and walking around the city.",
    aboutSvetlanaPhotoLabel: "Svetlana's photo",
    aboutSvetlanaName: "Svetlana, 37",
    aboutSvetlanaText:
      "Creative and very organized. Loves bright interiors, order and home cooking.",
    aboutUsFactsTitle: "Key facts",
    aboutFactNoKids: "Zero kids",
    aboutFactNoPets: "Zero pets",
    aboutFactCalm: "Zero loud parties",
    aboutFactClean: "Zero mess",
    apartmentTitle: "What kind of flat we are looking for",
    apartmentIntro:
      "We are looking for a bright, quiet flat, comfortable for two people working from home.",
    apartmentLocationTitle: "Location in Valencia",
    apartmentLocationText:
      "Quiet neighbourhoods with good connection to the centre and services nearby.",
    apartmentSizeTitle: "Size and layout",
    apartmentSizeText: "1–2 bedrooms, bright living room and space to work.",
    apartmentTermTitle: "Term and stability",
    apartmentTermText: "We are looking for a stable, long‑term stay.",
    apartmentBudgetTitle: "Budget",
    apartmentBudgetText:
      "We will discuss budget details in private — we are realistic and open to dialogue.",
    whyUsTitle: "Why it will be comfortable with us",
    whyUsIntro:
      "We are not looking for a perfect flat, but for a real one. We take care of it, without turning it into a museum.",
    whyUsIncomeTitle: "Stable income",
    whyUsIncomeText: "We have stable jobs and can provide proof of income.",
    whyUsCareTitle: "We care for the flat",
    whyUsCareText: "We keep the place clean, tidy and in good condition.",
    whyUsNeighborsTitle: "Respect for neighbours",
    whyUsNeighborsText:
      "No after‑parties, no shouting in the hallway and no sound tests at 2 a.m.",
    whyUsCommunicationTitle: "Easy communication",
    whyUsCommunicationText:
      "We speak English and stay in touch by phone or messaging apps.",
    contactTitle: "Let's talk about the flat",
    contactIntro:
      "If you have a flat in Valencia that might fit us, we will be happy to talk.",
    contactEmailLabel: "Email",
    contactEmailValue: "example@email.com",
    contactPhoneLabel: "Phone",
    contactPhoneValue: "+34 123 456 789",
    contactSocialLabel: "Messaging / social",
    contactSocialValue: "Link to WhatsApp, Telegram or social networks.",
    contactButton: "Send an email now",
    contactNote:
      "These contact details are examples. We will replace them with your real contacts when everything is ready.",
    footerText: "Denis & Svetlana · Looking for a flat in Valencia",
  },
};

const STORAGE_KEY = "family-landing-language";

function applyLanguage(lang) {
  const dictionary = TRANSLATIONS[lang];
  if (!dictionary) return;

  document.documentElement.lang = lang === "es" ? "es" : "en";

  const elements = document.querySelectorAll("[data-i18n-key]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n-key");
    const value = dictionary[key];
    if (typeof value === "string") {
      el.textContent = value;
    }
  });

  const toggleButtons = document.querySelectorAll(
    ".language-toggle__btn[data-lang]"
  );
  toggleButtons.forEach((btn) => {
    const isActive = btn.getAttribute("data-lang") === lang;
    btn.classList.toggle("language-toggle__btn--active", isActive);
  });
}

function setupScrollAnimations() {
  const animated = document.querySelectorAll("[data-animate]");
  if (!animated.length) return;

  const prefersReduced =
    window.matchMedia &&
    window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  if (!("IntersectionObserver" in window) || prefersReduced) {
    animated.forEach((el) => el.classList.add("is-visible"));
    return;
  }

  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          obs.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.18,
      rootMargin: "0px 0px -10% 0px",
    }
  );

  animated.forEach((el) => observer.observe(el));
}

function getInitialLanguage() {
  const stored = window.localStorage.getItem(STORAGE_KEY);
  if (stored && (stored === "es" || stored === "en")) {
    return stored;
  }

  const browserLang = navigator.language || navigator.userLanguage || "es";
  if (browserLang.toLowerCase().startsWith("es")) return "es";
  if (browserLang.toLowerCase().startsWith("en")) return "en";

  return "es";
}

function handleLanguageToggleClick(event) {
  const button = event.target.closest(".language-toggle__btn[data-lang]");
  if (!button) return;

  const lang = button.getAttribute("data-lang");
  if (!lang || !(lang in TRANSLATIONS)) return;

  window.localStorage.setItem(STORAGE_KEY, lang);
  applyLanguage(lang);
}

document.addEventListener("DOMContentLoaded", () => {
  const initialLang = getInitialLanguage();
  applyLanguage(initialLang);

  const languageToggle = document.querySelector(".language-toggle");
  if (languageToggle) {
    languageToggle.addEventListener("click", handleLanguageToggleClick);
  }

  setupScrollAnimations();
});

